<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI 旅行助手</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <!-- 高德地图SDK将在JavaScript中动态加载 -->
  <link rel="stylesheet" href="css/main.css">
</head>
<body>
  <div class="container">
    <a href="#about" class="about-link" onclick="showAbout(); return false;">关于项目</a>
    
    <!-- 地图容器 -->
    <div id="map">
      <div class="map-loading">
        <div style="text-align:center;">
          <div style="margin-bottom:15px;">加载地图中...</div>
          <div class="typing-indicator">
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- 聊天容器 -->
    <div class="chat-container" id="chatContainer">
      <div class="chat-header">
        <h3>AI 旅行 & 通用助手</h3>
        <button class="minimize-btn" id="minimizeBtn">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
            <path d="M2 8a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11A.5.5 0 0 1 2 8Z"/>
          </svg>
        </button>
      </div>
      
      <div class="chat-messages" id="chatMessages">
        <div class="message assistant-message">
          你好！我是你的AI助手。不仅可以回答旅行相关问题，还可以聊其他话题。尝试问我关于旅游景点、餐厅推荐，或者任何你感兴趣的话题！
        </div>
      </div>
      
      <form class="chat-input" id="chatForm">
        <input type="text" id="chatInput" placeholder="问我任何问题...">
        <button type="submit" class="send-btn" id="sendBtn">发送</button>
      </form>
    </div>
    
    <!-- 聊天悬浮按钮 -->
    <div class="chat-bubble" id="chatBubble" style="display: none;">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
        <path d="M8 15c4.418 0 8-3.134 8-7s-3.582-7-8-7-8 3.134-8 7c0 1.76.743 3.37 1.97 4.6-.097 1.016-.417 2.13-.771 2.966-.079.186.074.394.273.362 2.256-.37 3.597-.938 4.18-1.234A9.06 9.06 0 0 0 8 15z"/>
      </svg>
    </div>
  </div>
  
  <!-- 关于模态框 -->
  <div id="aboutModal" class="modal" style="display: none;">
    <div class="modal-content">
      <h2 class="modal-title">关于 AI 旅行 & 通用助手</h2>
      
      <div class="modal-section">
        <h3 class="modal-section-title">项目介绍</h3>
        <p class="modal-text">
          AI 旅行 & 通用助手是一个基于 OpenStreetMap 和 DeepSeek AI 开发的智能对话工具。
          不仅可以帮助用户探索中国各地的旅游景点和目的地信息，还能回答各类通用问题。
        </p>
        <p class="modal-text">
          本项目采用了轻量级前端技术，提供了流畅的用户体验和丰富的交互功能。
        </p>
      </div>
      
      <div class="modal-section">
        <h3 class="modal-section-title">主要功能</h3>
        <ul class="modal-list">
          <li class="modal-list-item">通过 AI 聊天界面获取各类信息</li>
          <li class="modal-list-item">旅游相关问题会在地图上显示目的地位置</li>
          <li class="modal-list-item">查看目的地详情和图片</li>
          <li class="modal-list-item">回答通用知识和信息检索类问题</li>
          <li class="modal-list-item">响应式设计，适配各种设备</li>
        </ul>
      </div>
      
      <div class="modal-section">
        <h3 class="modal-section-title">技术栈</h3>
        <ul class="modal-list">
          <li class="modal-list-item">HTML/CSS/JavaScript</li>
          <li class="modal-list-item">高德地图 API</li>
          <li class="modal-list-item">DeepSeek AI API</li>
          <li class="modal-list-item">Cloudflare Pages Functions</li>
        </ul>
      </div>
      
      <button onclick="hideAbout()" class="modal-button">关闭</button>
    </div>
  </div>

  <!-- 数据模块 -->
  <script src="js/data/cities.js"></script>
  
  <!-- 地图模块 -->
  <script src="js/map/map-loader.js"></script>
  <script src="js/map/map-core.js"></script>
  <script src="js/map/map-markers.js"></script>
  <script src="js/map/map-search.js"></script>
  <script src="js/map/map-utils.js"></script>
  
  <!-- 聊天模块 -->
  <script src="js/chat/chat-ui.js"></script>
  <script src="js/chat/chat-api.js"></script>
  <script src="js/chat/geo-text-processor.js"></script>
  
  <!-- UI模块 -->
  <script src="js/ui/modal.js"></script>
  
  <!-- 通用工具模块 -->
  <script src="js/utils/common.js"></script>
  
  <!-- 主应用模块 -->
  <script src="js/app.js"></script>
</body>
</html> 